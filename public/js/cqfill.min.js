(()=>{var l;(function(i){i[i.LESS_THAN=0]="LESS_THAN",i[i.LESS_OR_EQUAL=1]="LESS_OR_EQUAL",i[i.GREATER_THAN=2]="GREATER_THAN",i[i.GREATER_OR_EQUAL=3]="GREATER_OR_EQUAL"})(l||(l={}));var d;(function(i){i[i.SizeQuery=0]="SizeQuery",i[i.ContainerConditionConjunction=1]="ContainerConditionConjunction",i[i.ContainerConditionDisjunction=2]="ContainerConditionDisjunction",i[i.ContainerConditionNegation=3]="ContainerConditionNegation"})(d||(d={}));function b(){return Array.from({length:16},()=>Math.floor(Math.random()*256).toString(16)).join("")}function E(e){switch(e.toLowerCase()){case"inlinesize":return"inlineSize";case"blocksize":return"blockSize";case"width":return"inlineSize";case"height":return"blockSize";default:throw Error(`Unknown feature name ${e} in container query`)}}function j(e,n){let t=n[E(e.feature)];switch(e.comparator){case 3:return t>=e.threshold;case 2:return t>e.threshold;case 1:return t<=e.threshold;case 0:return t<e.threshold}}function h(e,n){switch(e.type){case 1:return h(e.left,n)&&h(e.right,n);case 2:return h(e.left,n)||h(e.right,n);case 3:return!h(e.right,n);case 0:return j(e,n);default:throw Error("wtf?")}}function H(e,n){let t;if("borderBoxSize"in n)t=n.borderBoxSize?.[0]??n.borderBoxSize;else{let r=getComputedStyle(n.target);t={blockSize:n.contentRect.height,inlineSize:n.contentRect.width},t.blockSize+=parseInt(r.paddingBlockStart.slice(0,-2))+parseInt(r.paddingBlockEnd.slice(0,-2)),t.inlineSize+=parseInt(r.paddingInlineStart.slice(0,-2))+parseInt(r.paddingInlineEnd.slice(0,-2))}return h(e,t)}function q(e,n){for(;e;)if(e=e.parentElement,!!g.has(e)&&!(n&&!g.get(e).includes(n)))return e;return null}var g=new WeakMap;function m(e,n){w.observe(e),g.has(e)||g.set(e,[]),g.get(e).push(n)}var A=[];function D(e){A.push(e)}var w=new ResizeObserver(e=>{let n=new Map(e.map(t=>[t.target,t]));for(let t of A)for(let{selector:r}of t.rules){let i=document.querySelectorAll(r);for(let a of i){let u=q(a,t.name);if(!u||!n.has(u))continue;let f=n.get(u);a.classList.toggle(t.className,H(t.condition,f))}}}),R=[],$=new MutationObserver(e=>{for(let n of e){for(let t of n.removedNodes)t instanceof HTMLElement&&w.unobserve(t);for(let t of n.addedNodes)if(t instanceof HTMLElement)for(let r of R){t.matches(r.selector)&&m(t,r.name);for(let i of t.querySelectorAll(r.selector))m(i,r.name)}}});$.observe(document.documentElement,{childList:!0,subtree:!0});function C(e,n){let t={sheetSrc:e,index:0,name:n};for(;t.index<t.sheetSrc.length&&(o(t),!(t.index>=t.sheetSrc.length));){if(c("/*",t)){for(;c("/*",t);)W(t),o(t);continue}if(c("@container",t)){let{query:r,startIndex:i,endIndex:a}=Y(t),u=Z(r);k(i,a,u,t),D(r)}else{let r=Q(t);if(!r)continue;G(r,t)}}return n&&(t.sheetSrc=t.sheetSrc.replace(/url\(["']*([^)"']+)["']*\)/g,(r,i)=>`url(${new URL(i,n)})`)),t.sheetSrc}function G(e,n){let t=e.block.contents.includes("container-"),r=e.block.contents.includes("container:");if(!t&&!r)return;let i,a;t&&(i=/container-name\s*:([^;}]+)/.exec(e.block.contents)?.[1].trim(),e.block.contents=e.block.contents.replace("container-type","contain")),r&&([a,i]=(/container\s*:([^;}]+)/.exec(e.block.contents)?.[1]).split("/").map(f=>f.trim()),e.block.contents=e.block.contents.replace(/container: ([^;}]+)/,`contain: ${a};`)),i||(i=b()),k(e.block.startIndex,e.block.endIndex,e.block.contents,n),R.push({name:i,selector:e.selector});for(let u of document.querySelectorAll(e.selector))m(u,i)}function k(e,n,t,r){if(r.sheetSrc=r.sheetSrc.slice(0,e)+t+r.sheetSrc.slice(n),r.index>=n){let i=r.index-n;r.index=e+t.length+i}}function W(e){s(e,"/*"),z("*/",e),s(e,"*/")}function L(e){if(e.index++,e.index>e.sheetSrc.length)throw S(e,"Advanced beyond the end")}function z(e,n){let t=n.index;for(;!c(e,n);)L(n);return n.sheetSrc.slice(t,n.index)}function c(e,n){return n.sheetSrc.substr(n.index,e.length)==e}function B(e){let n=e.index;return z("{",e),e.sheetSrc.slice(n,e.index)}function Q(e){let n=e.index,t=B(e);if(!t)return;let r=K(e),i=e.index;return{selector:t,block:r,startIndex:n,endIndex:i}}function F(e){return e.name?e.name:"<anonymous file>"}function S(e,n){return Error(`(${F(e)}): ${n}`)}function s(e,n){if(e.sheetSrc.substr(e.index,n.length)!=n)throw S(e,`Did not find expected sequence ${n}`);e.index+=n.length}var P=/\s*/g;function o(e){P.lastIndex=e.index;let n=P.exec(e.sheetSrc);n&&(e.index+=n[0].length)}function N(e){return e.sheetSrc[e.index]}var I=/[\w\\\@_-]+/g;function y(e){I.lastIndex=e.index;let n=I.exec(e.sheetSrc);if(!n)throw S(e,"Expected an identifier");return e.index+=n[0].length,n[0]}function J(e){return y(e).toLowerCase()}var _=/[0-9.]*/g;function v(e){_.lastIndex=e.index;let n=_.exec(e.sheetSrc);if(!n)throw S(e,"Expected a number");e.index+=n[0].length,s(e,"px");let t=parseFloat(n[0]);if(Number.isNaN(t))throw S(e,`${n[0]} is not a valid number`);return t}function K(e){let n=e.index;s(e,"{");let t=1;for(;t!=0;)e.sheetSrc[e.index]==="{"?t++:e.sheetSrc[e.index]==="}"&&t--,L(e);let r=e.index,i=e.sheetSrc.slice(n,r);return{startIndex:n,endIndex:r,contents:i}}function V(e){let n=J(e);o(e),s(e,":"),o(e);let t=v(e);o(e),s(e,")"),o(e);let r;if(n.startsWith("min-"))r=3;else if(n.startsWith("max-"))r=1;else throw Error(`Unknown legacy container query ${n}`);return{type:0,feature:E(n.slice(4)),comparator:r,threshold:t}}function X(e){if(c(">=",e))return s(e,">="),3;if(c(">",e))return s(e,">"),2;if(c("<=",e))return s(e,"<="),1;if(c("<",e))return s(e,"<"),0;throw Error("Unknown comparator")}function M(e){if(s(e,"("),c("(",e)){let i=T(e);return s(e,")"),i}if(o(e),c("min-",e)||c("max-",e))return V(e);let n=y(e).toLowerCase();o(e);let t=X(e);o(e);let r=v(e);return o(e),s(e,")"),o(e),{type:0,feature:n,comparator:t,threshold:r}}function O(e){if(o(e),c("(",e))return M(e);if(c("size",e))return s(e,"size"),o(e),M(e);throw c("style",e)?Error("Style query not implement yet"):Error("Unknown container query type")}function x(e){return c("not",e)?(s(e,"not"),o(e),{type:3,right:O(e)}):O(e)}function T(e){let n=x(e);for(;;)if(c("and",e)){s(e,"and"),o(e);let t=x(e);o(e),n={type:1,left:n,right:t}}else if(c("or",e)){s(e,"or"),o(e);let t=x(e);o(e),n={type:2,left:n,right:t}}else break;return n}function Y(e){let n=e.index;s(e,"@container"),o(e);let t="";N(e)!=="("&&!c("size",e)&&!c("style",e)&&(t=y(e),o(e));let r=T(e);o(e),s(e,"{"),o(e);let i=[];for(;N(e)!=="}";)i.push(Q(e)),o(e);s(e,"}");let a=e.index;o(e);let u=`cq_${b()}`;return{query:{condition:r,className:u,name:t,rules:i},startIndex:n,endIndex:a}}function Z(e){return e.rules.map(n=>`:is(${n.selector}).${e.className} ${n.block.contents}`).join(`
`)}function p(){new MutationObserver(r=>{for(let i of r)for(let a of i.addedNodes)a instanceof HTMLStyleElement&&n(a),a instanceof HTMLLinkElement&&t(a)}).observe(document.documentElement,{childList:!0,subtree:!0});function n(r){let i=C(r.innerHTML);r.innerHTML=i}async function t(r){if(r.rel!=="stylesheet")return;let i=new URL(r.href,document.baseURI);if(i.origin!==location.origin)return;let a=await fetch(i.toString()).then(U=>U.text()),u=C(a,i.toString()),f=new Blob([u],{type:"text/css"});r.href=URL.createObjectURL(f)}document.querySelectorAll("style").forEach(r=>n(r)),document.querySelectorAll("link").forEach(r=>t(r))}var ee="container"in document.documentElement.style;ee||p();})();
